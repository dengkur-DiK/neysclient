{"ast":null,"code":"// file: client/src/pages/messageslist.tsx\nimport{useQuery,useMutation,useQueryClient}from\"@tanstack/react-query\";import{Mail,User,Calendar,MessageSquare,Trash2}from\"lucide-react\";import{Button}from\"@/components/ui/button\";import{useToast}from\"@/hooks/use-toast\";// assuming you have this hook\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MessagesList(){const queryClient=useQueryClient();const{toast}=useToast();const{data:messages=[],isLoading}=useQuery({queryKey:[\"/api/messages\"],queryFn:()=>fetch(\"/api/messages\").then(res=>res.json())});const deleteMutation=useMutation({mutationFn:async id=>{const response=await fetch(\"/api/messages/\".concat(id),{method:'DELETE'});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to delete message');}},onSuccess:()=>{queryClient.invalidateQueries({queryKey:[\"/api/messages\"]});toast({title:\"Message Deleted\",description:\"The message was successfully removed.\"});},onError:error=>{toast({title:\"Error\",description:error.message,variant:\"destructive\"});}});if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-400\",children:\"Loading messages...\"});}if(messages.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-400\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-12 h-12 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No messages yet. This section will show customer inquiries.\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:messages.map(msg=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-600 rounded-lg p-4 bg-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-orange-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:msg.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-gray-300\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:msg.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-orange-500\",children:\"Message:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-300\",children:msg.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right text-sm text-gray-400\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(msg.createdAt).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:new Date(msg.createdAt).toLocaleTimeString()})]}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>deleteMutation.mutate(msg.id),disabled:deleteMutation.isPending,className:\"ml-4\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4 text-red-500\"})})]})},msg.id))});}","map":{"version":3,"names":["useQuery","useMutation","useQueryClient","Mail","User","Calendar","MessageSquare","Trash2","Button","useToast","jsx","_jsx","jsxs","_jsxs","MessagesList","queryClient","toast","data","messages","isLoading","queryKey","queryFn","fetch","then","res","json","deleteMutation","mutationFn","id","response","concat","method","ok","errorData","Error","error","onSuccess","invalidateQueries","title","description","onError","message","variant","className","children","length","map","msg","name","email","Date","createdAt","toLocaleDateString","toLocaleTimeString","size","onClick","mutate","disabled","isPending"],"sources":["/workspaces/neysclient/src/pages/messageslist.tsx"],"sourcesContent":[" // file: client/src/pages/messageslist.tsx\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Mail, User, Calendar, MessageSquare, Trash2 } from \"lucide-react\";\nimport { Message } from \"server/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\"; // assuming you have this hook\n\nexport default function MessagesList() {\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  const { data: messages = [], isLoading } = useQuery<Message[]>({\n    queryKey: [\"/api/messages\"],\n    queryFn: () => fetch(\"/api/messages\").then((res) => res.json())\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: number) => {\n      const response = await fetch(`/api/messages/${id}`, {\n        method: 'DELETE',\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to delete message');\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/messages\"] });\n      toast({\n        title: \"Message Deleted\",\n        description: \"The message was successfully removed.\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (isLoading) {\n    return <div className=\"text-center py-8 text-gray-400\">Loading messages...</div>;\n  }\n\n  if (messages.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        <MessageSquare className=\"w-12 h-12 mx-auto mb-4\" />\n        <p>No messages yet. This section will show customer inquiries.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {messages.map((msg) => (\n        <div key={msg.id} className=\"border border-gray-600 rounded-lg p-4 bg-gray-800\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1 space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                <User className=\"w-4 h-4 text-orange-500\" />\n                <span className=\"font-semibold\">\n                  {msg.name}\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2 text-sm text-gray-300\">\n                <Mail className=\"w-4 h-4\" />\n                <span>{msg.email}</span>\n              </div>\n              <div className=\"text-sm\">\n                <span className=\"font-semibold text-orange-500\">Message:</span>\n                <p className=\"mt-1 text-gray-300\">{msg.message}</p>\n              </div>\n            </div>\n            <div className=\"text-right text-sm text-gray-400\">\n              <div className=\"flex items-center gap-1\">\n                <Calendar className=\"w-4 h-4\" />\n                <span>{new Date(msg.createdAt).toLocaleDateString()}</span>\n              </div>\n              <div className=\"mt-1\">\n                {new Date(msg.createdAt).toLocaleTimeString()}\n              </div>\n            </div>\n            {/* ADDED: Delete Button */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => deleteMutation.mutate(msg.id)}\n              disabled={deleteMutation.isPending}\n              className=\"ml-4\"\n            >\n              <Trash2 className=\"w-4 h-4 text-red-500\" />\n            </Button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}